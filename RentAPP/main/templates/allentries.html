{% extends 'base.html' %}

{% block title %}All Entires{% endblock %}

{% block body %}





<table style="width:100%">
    <tr>
        {% for column in columns %} 
      
          <th>{{column | capfirst}}</th>
        
       
        {% endfor %} 

        <th>Rent Report</th>
    </tr> 
        {% for customer in context %} 
        <tr>
          <td>{{customer.username}}</td>
          <td>{{customer.text}}</td>
          <td>{{customer.gender}}</td>
          <td>{{customer.total}}</td>
         <td>{{customer.email }}</td>
   
            <td>  <a id='{{customer.username}}' href="#" onclick="displayreport(this)">See Report</a></td>
         
        </tr>  
        {% endfor %} 
</table>
 




<!-- The Modal -->
<div id="myModal" class="modal">


  <div class="modal-content">
    <span class="close">&times;</span>
  



  {% for name,data in reports.items %}

  <table style="display: none; top: 10%; overflow: auto;" id="{{name}}2" >
    <tr>
        {% for column in rent_columns %} 
      
          <th>{{column.name | capfirst}}</th>
  
        
       
        {% endfor %} 
    </tr> 

    {% for customer in data %}
      <tr >
          <td>{{customer.id}}</td>
          <td>{{customer.info}}</td>
          <td>{{customer.time}}</td>
          
          <td>{{customer.Previous_Balance}}</td>
          <td>{{customer.Rent}}</td>
          <td>{{customer.Electricity_Units}}</td>
          <td>{{customer.Electricity_Rate}}</td>
          <td>{{customer.Other}}</td>
          <td>{{customer.Total}}</td>
          <td>{{customer.status}}</td>
          
        
      </tr>
    {% endfor %}  
  </table>

  <br>
  {% endfor %} 
</div>

</div> 

<script>
 

  var modal;
  var table;
  var span;

  function displayreport(mychoice)
  {
     var btn = document.getElementById(mychoice.id);
     var table_id = mychoice.id + "2"
     console.log(table_id)
     table = document.getElementById(table_id);

      // Get the modal
    modal = document.getElementById("myModal");
     // Get the <span> element that closes the modal
    span = document.getElementsByClassName("close")[0];

    modal.style.display = "block";
    table.style.display = "block";

    
  }
  

       // Get the modal
  var modal = document.getElementById("myModal");
  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
    table.style.display = "none";
  }
  
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
      table.style.display = "none";
    }
     


  }
  </script>
  
{% endblock %}
